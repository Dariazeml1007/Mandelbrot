
![–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π](Mandelbrot.png)


# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞
*–¶–µ–ª–∏* : 
     1)–ò–∑–æ–æ–±—Ä–∞–∑–∏—Ç—å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞.
     2)–ù–∞–ø–∏—Å–∞—Ç—å —Ç—Ä–∏ –≤–∞—Ä–∏–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å —Ä–∞–∑–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π —Ä–∞—Å—á–µ—Ç–∞.
     3)–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º.

## üñ•Ô∏è –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º
–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é –≤–µ—Ä—Å–∏—é —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –º–Ω–æ–∂–µ—Å—Ç–≤—É –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞. 
 ### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

1.–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

2.–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–æ 800x600 –ø–∏–∫—Å–µ–ª–µ–π

3.–ú–∞—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è 
- –î–≤–∏–∂–µ–Ω–∏–µ –≤ —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –ø–æ–º–æ—â—å—é —Å—Ç—Ä–µ–ª–æ–∫, c –ø–æ–º–æ—â—å—é '+' –∏ '-' –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∏ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –º–∞—à—Ç–∞–±–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.
- –ö–ª–∞–≤–∏—à–∞ Esc –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞, –∫–ª–∞–≤–∏—à–∞ Space –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –º–∞—à—Ç–∞–±–∞ –∫ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–º—É.
- 
4.–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å —Ç–µ–∫—É—â–∏–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

5. –¶–≤–µ—Ç–æ–≤–∞—è –≥–∞–º–º–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–æ—Ä–º—É–ª–∞               | –û–ø–∏—Å–∞–Ω–∏–µ                                  | –î–∏–∞–ø–∞–∑–æ–Ω |
|-----------|-----------------------|-------------------------------------------|----------|
| –ö—Ä–∞—Å–Ω—ã–π   | `(iter * 197) & 0xFF` | –ü—Ä–æ—Å—Ç–æ–µ —á–∏—Å–ª–æ 197 —Å–æ–∑–¥–∞–µ—Ç —Ö–∞–æ—Ç–∏—á–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω | 0-255    |
| –ó–µ–ª–µ–Ω—ã–π   | `(iter * 237) & 0xFF` | –ß–∏—Å–ª–æ 237 –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–≤–µ—Ç–æ–≤–æ–π —Ä–∞–∑–±—Ä–æ—Å    | 0-255    |
| –°–∏–Ω–∏–π     | `(iter * 255) & 0xFF` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±–∞–π—Ç–∞ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏  | 0-255    |

![–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π](–°loseImg.png)



6.–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –≤–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—Ä–≥—É–º–µ–Ω—Ç --graphics:




## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞ 
- x[i] = x[i - 1]^2 - y[i - 1]^2 + x[0]
- y[i] = 2 * x[i - 1] * y[i - 1] + y[0]

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã
- –†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: 600*800 –ø–∏–∫—Å–µ–ª–µ–π
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –¥–ª—è –æ–¥–Ω–æ–π —Ç–æ—á–∫–∏: 256
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–¥–∏—É—Å–∞ (–∫–≤–∞–¥—Ä–∞—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç —Ü–µ–Ω—Ç—Ä–∞). –ï—Å–ª–∏ x¬≤ + y¬≤ ‚â• R_MAX, —Ç–æ—á–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã—à–µ–¥—à–µ–π –∑–∞ –≥—Ä–∞–Ω–∏—Ü—É –º–Ω–æ–∂–µ—Å—Ç–≤–∞ : 4

  
## üöÄ –¢—Ä–∏ –≤–µ—Ä—Å–∏–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
### 1. –ë–∞–∑–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (Simple)

–ü–æ—Ç–æ—á–µ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:

-O2: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  (12.0 —Å–µ–∫)

-O3: ‚ñà‚ñà‚ñà‚ñà          (6.2 —Å–µ–∫)

```c
int mandelbrot(float x0, float y0, int count_iter) {
    float x = 0, y = 0;
    for (int iter = 0; iter < count_iter; iter++) {
        float x2 = x*x, y2 = y*y;
        if (x2 + y2 >= R_MAX) return iter;
        y = 2*x*y + y0;
        x = x2 - y2 + x0;
    }
    return count_iter;
}
```
### 2. –ì—Ä—É–ø–ø–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (Grouped)

–û–±—Ä–∞–±–æ—Ç–∫–∞ 8 —Ç–æ—á–µ–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:
-O2:   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà (14.170 —Å–µ–∫ )
-O3:   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà           (5.763 —Å–µ–∫  )
```c
void mandelbrot(PointGroup *group) {
    float x[8] = {0}, y[8] = {0};
    bool active[8] = {true};
    for (int iter = 0; iter < MAX_ITER; iter++) {
        for (int i = 0; i < 8; i++) {
            if (!active[i]) continue;
            float x2 = x[i]*x[i], y2 = y[i]*y[i];
            if (x2 + y2 >= R_MAX) {
                active[i] = false;
                group->iter[i] = iter;
                continue;
            }
            y[i] = 2*x[i]*y[i] + groupl->y[i];
            x[i] = x2 - y2 + group->x[i];
        }
    }
}
```
### 3. –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è AVX (Intrinsics)
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 256-–±–∏—Ç–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤:

-O2:  2.581 —Å–µ–∫ [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà]
-O3:  2.543 —Å–µ–∫ [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà]

```c
void mandelbrot_avx(PointGroup* group) {
    __m256 x = _mm256_setzero_ps();
    __m256 y = _mm256_setzero_ps();
    __m256 x0 = _mm256_load_ps(group->x);
    __m256 y0 = _mm256_load_ps(group->y);
    
    __m256 active = _mm256_set1_ps(-1.0f);
    __m256i res = _mm256_setzero_si256();
    
    for (int iter = 0; iter < MAX_ITER; iter++) {
        __m256 x2 = _mm256_mul_ps(x, x);
        __m256 y2 = _mm256_mul_ps(y, y);
        __m256 mask = _mm256_cmp_ps(_mm256_add_ps(x2, y2), 
               _mm256_set1_ps(R_MAX), _CMP_LT_OS);
        
        active = _mm256_and_ps(active, mask);
        res = _mm256_sub_epi32(res, _mm256_castps_si256(mask));
        
        __m256 xy = _mm256_mul_ps(x, y);
        x = _mm256_add_ps(_mm256_sub_ps(x2, y2), x0);
        y = _mm256_add_ps(_mm256_add_ps(xy, xy), y0);
        
        if (_mm256_testz_ps(active, active)) break;
    }
    _mm256_store_si256((__m256i*)group->iter, res);
}
```
## üìä –ú–µ—Ç–æ–¥–∏–∫–∞ –∏–∑–º–µ—Ä–µ–Ω–∏–π 




–í–µ—Ä—Å–∏—è —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –∏–Ω—Ç—Ä–∏–Ω—Å–∏–∫–∞–º–∏



Simple –≤–µ—Ä—Å–∏—è: k = 0.000190

Intrinsics –≤–µ—Ä—Å–∏—è: k = 0.000036

–£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ ~5.27 —Ä–∞–∑ (—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–º–æ–∂–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –¥–ª—è AVX2 ‚Äî 8x)

–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π



## üìå –í—ã–≤–æ–¥—ã
–î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 5.27 —Ä–∞–∑ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π


